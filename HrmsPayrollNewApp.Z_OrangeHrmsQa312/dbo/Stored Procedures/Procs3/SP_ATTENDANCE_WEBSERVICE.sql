


CREATE PROCEDURE [dbo].[SP_ATTENDANCE_WEBSERVICE]
@CMP_ID				NUMERIC,
@ALPHA_EMP_CODE		VARCHAR(20),
@FROM_DATE			DATETIME = '1900-01-01',
@TO_DATE 			DATETIME = '1900-01-01'

AS
BEGIN
		SET NOCOUNT ON 
		SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
		SET ARITHABORT ON

	DECLARE @EMP_ID AS NUMERIC
	SET @EMP_ID = 0

	SELECT @EMP_ID = ISNULL(EMP_ID,0) FROM T0080_EMP_MASTER WITH (NOLOCK) WHERE ALPHA_EMP_CODE = @ALPHA_EMP_CODE AND CMP_ID = @CMP_ID AND EMP_LEFT <> 'Y'

	IF @EMP_ID = 0
		BEGIN
			RETURN
		END
	
	EXEC SP_RPT_EMP_IN_OUT_MUSTER_HOME_GET	@CMP_ID			= @CMP_ID,
											@FROM_DATE		= @FROM_DATE,
											@TO_DATE		= @TO_DATE,
											@BRANCH_ID		= 0,
											@CAT_ID			= 0,
											@GRD_ID			= 0,
											@TYPE_ID		= 0,
											@DEPT_ID		= 0,
											@DESIG_ID		= 0,
											@EMP_ID			= @EMP_ID,
											@CONSTRAINT		= '',
											@REPORT_FOR		= 'WEB-SERVICE'

END
